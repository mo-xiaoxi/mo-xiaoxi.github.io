---
title: pythonä»£ç å°å·¥å…·ï¼è®¡æ—¶å™¨
time: 2016.05.01 12:47:00
layout: post
tags:
- python
- å·¥å…·
excerpt: æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬åœ¨å†™ä»£ç æ—¶ï¼Œéœ€å¯¹ä¸€äº›å‡½æ•°æˆ–è€…è¿‡ç¨‹è¿›è¡Œè®¡æ—¶è®¡ç®—ï¼Œä»¥è¡¡é‡è¯¥å‡½æ•°çš„è¿ç®—é€Ÿåº¦æˆ–è€…è¡¡é‡ä¸€ä¸ªé€šä¿¡åè®®çš„æ€§èƒ½ã€‚æœ¬åšæ–‡å†™äº†ä¸€ä¸ªå°è®¡æ—¶å™¨çš„è½®å­ï¼Œæ–¹ä¾¿å¤§å®¶è¿›è¡Œä¸Šè¿°å·¥ä½œã€‚please enjoy it !ğŸ˜Š

---

# è®¡æ—¶å™¨

```
#!/usr/bin/python
# -*- coding: utf-8 -*-
__Author__ = 'moxiaoxi'
__Filename__ = 'time.py'
'''
è¿™é‡Œå®šä¹‰ä¸€ä¸ªè®¡æ—¶ç›¸å…³çš„å‡½æ•°ï¼Œç”¨æ¥æ¨¡æ‹Ÿç§’è¡¨ï¼Œè¡¡é‡æ€§èƒ½
ä½¿ç”¨ç›¸å…³è¯·æŸ¥çœ‹mainå‡½æ•°ï¼Œæˆ‘ç»™äº†ä¸‰ä¸ªç¤ºä¾‹
'''

import timeit 

class Timer:
    def __init__(self,func=timeit.default_timer#python2.7 func=time.perf_counter python3):
            self.elapsed = 0.0
        self._func = func
        self._start = None

    def start(self):
        if self._start is not None:
            raise RuntimeError('Already started')
        self._start = self._func()

    def stop(self):
        if self._start is None:
            raise RuntimeError('Not started')
        end = self._func()
        self.elapsed += end - self._start
        self._start = None

    def reset(self):
        self.elapsed = 0.0 
    @property
    def running(self):
        return self._start is not None

    def __enter__(self):
        self.start()
        return self

    def __exit__(self,*args):
        self.stop()
        return 'stop'



if __name__ =='__main__':
    def countdown(n):
        while n > 0 :
            n -= 1

    #ä¾‹å­  ä½¿ç”¨startï¼stopè®¡æ—¶
    t = Timer()
    t.start()
    countdown(1000000)
    t.stop()
    print(t.elapsed)

    #ä¾‹å­ ä½¿ç”¨ä¿®é¥°å™¨è¿›è¡Œè®¡æ—¶
    with t :
        countdown(1000000)
    print(t.elapsed)

    #ä¾‹å­ å¼•ç”¨ç±»
    with Timer() as t2:
        countdown(1000000)
    print(t2.elapsed)



```













-----
å‚è€ƒè‡ªcookbook
